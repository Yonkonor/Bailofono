<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Sintetizador con acelerómetro</title>
    <script src="https://unpkg.com/tone"></script>
  </head>
  <body>
    <h1>Sintetizador con acelerómetro</h1>
    <button id="btn">Encender / Apagar</button>

    <script>
      const synth = new Tone.PolySynth().toDestination();
      let isOn = false;

      function toggleSynth() {
        if (isOn) {
          synth.releaseAll();
          isOn = false;
        } else {
          isOn = true;
          Tone.start();
          const accl = new Accelerometer({frequency: 60});
          accl.addEventListener('reading', () => {
            const z = accl.z;
            const vol = z > 0 ? z : 0;
            synth.volume.value = vol * 12 - 12;
          });
          accl.start();
        }
      }

      const btn = document.getElementById('btn');
      btn.addEventListener('touchstart', toggleSynth);
    </script>
  </body>
</html>
