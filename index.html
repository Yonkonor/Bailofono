<!DOCTYPE html>
<html>
<head>
	<title>Acelerómetro</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<div id="chart-container"></div>
	<button id="start-btn">Iniciar</button>
	<button id="stop-btn">Detener</button>

	<script>
		var chartData = [];
		var chart;

		function start() {
			window.addEventListener('devicemotion', function(e) {
				var z = e.accelerationIncludingGravity.z;
				var time = new Date().getTime();
				chartData.push({
					x: time,
					y: z
				});
				chart.render();
			}, true);
		}

		function stop() {
			window.removeEventListener('devicemotion', true);
		}

		window.onload = function () {
			chart = new CanvasJS.Chart("chart-container", {
				title: {
					text: "Acelerómetro"
				},
				axisX: {
					title: "Tiempo (ms)"
				},
				axisY: {
					title: "Componente Z"
				},
				data: [{
					type: "line",
					dataPoints: chartData
				}]
			});

			document.getElementById("start-btn").addEventListener("click", start);
			document.getElementById("stop-btn").addEventListener("click", stop);
		}
	</script>

</body>
</html>
