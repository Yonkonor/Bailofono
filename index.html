<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Sintetizador de Sonido</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #f0f0f0;
			font-family: Arial, sans-serif;
		}
		
		#barra {
			position: absolute;
			top: 200px;
			left: 10%;
			width: 80%;
			height: 20px;
			background-color: #fff;
			border: 1px solid #ccc;
			border-radius: 10px;
		}
		
		#boton {
			position: absolute;
			top: 200px;
			left: 10%;
			width: 40px;
			height: 40px;
			background-color: #333;
			border-radius: 5px;
			cursor: pointer;
			z-index: 1;
		}
		
		#onoff {
			position: absolute;
			top: 120px;
			left: 10%;
			width: 80%;
			height: 40px;
			background-color: #333;
			color: #fff;
			border: none;
			border-radius: 5px;
			font-size: 18px;
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div id="barra">
		<div id="boton"></div>
	</div>
	<button id="onoff" onclick="toggleSound()">Encender Sonido</button>
	
	<script>
		var context = new AudioContext();
		var oscilador = null;
		var playing = false;
		var acelerometro = null;
		var intensidad = 0;
		
		function toggleSound() {
			if (playing) {
				oscilador.stop();
				playing = false;
				document.getElementById("onoff").innerHTML = "Encender Sonido";
			} else {
				oscilador = context.createOscillator();
				oscilador.type = "sine";
				oscilador.frequency.value = 200;
				oscilador.connect(context.destination);
				oscilador.start();
				playing = true;
				document.getElementById("onoff").innerHTML = "Apagar Sonido";
			}
		}
		
		document.addEventListener("DOMContentLoaded", function(event) {
			var barra = document.getElementById("barra");
			var boton = document.getElementById("boton");
			var ancho = barra.offsetWidth - boton.offsetWidth;
			var frecuencia = 200;
			
			if (window.DeviceOrientationEvent) {
				window.addEventListener("deviceorientation", function(event) {
					acelerometro = event.accelerationIncludingGravity;
					intensidad = Math.abs(acelerometro.z) / 10;
					if (intensidad > 1) {
						intensidad = 1;
					}
					if (playing) {
						oscilador.gain.value = intensidad;
					}
				});
			}
			
			barra.addEventListener("touchstart", function(event) {
				event.preventDefault();
				var touch = event.touches[0];
				if (touch.target == boton) {
					boton.offsetX = touch.clientX - boton.offsetLeft;
				}
			});
			
	</script>
</body>
</html>
